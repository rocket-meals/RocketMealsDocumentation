<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Metrics and Objectives &#8212; Rocket Meals 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=514cf933" />
    
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Observers" href="observers.html" />
    <link rel="prev" title="Optimization strategies" href="optimization.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="observers.html" title="Observers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="optimization.html" title="Optimization strategies"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="contents.html">Rocket Meals 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Metrics and Objectives</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="metrics-and-objectives">
<h1>Metrics and Objectives<a class="headerlink" href="#metrics-and-objectives" title="Link to this heading">¶</a></h1>
<p>Metrics and custom tuning objectives are two related features that are explained on this page.</p>
<section id="metrics">
<span id="id1"></span><h2>Metrics<a class="headerlink" href="#metrics" title="Link to this heading">¶</a></h2>
<p>User-defined metrics serve as an easy way for the user to define their own derived results based on the measurements reported
by Rocket Meals, and possibly any additional observers. This allows for example to implement performance metrics, such as
performance in floating point operations per second (e.g. GFLOP/s), or other metrics that might be more specific to the
application, for example the number of input elements processed per second. The code below shows an example of
user-defined metrics for a kernel that performs <code class="docutils literal notranslate"><span class="pre">total\_flops</span></code> GFLOP in total. User-defined
metrics are composable, meaning that they can be defined using other user-defined metrics. That is why metrics must be
specified using an OrderedDict as they are defined in order.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metrics</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;GFLOP/s&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">total_flops</span> <span class="o">/</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e3</span><span class="p">)</span>
<span class="n">metrics</span><span class="p">[</span><span class="s2">&quot;GFLOPS/W&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">total_flops</span> <span class="o">/</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;ps_energy&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>User-defined metrics are particularly useful when the total amount of work varies between kernel configurations
and the total execution time on its own is no longer a sufficient metric to compare the performance of different kernel
configurations. This occurs in many kernels, for example in kernels that perform a reduction step, where some
part of the data reduction is left for another kernel because of synchronization. In this case, the amount of
work performed by the first kernel depends on tunable parameters such as the thread block dimensions or the
number of thread blocks.</p>
</section>
<section id="tuning-objectives">
<span id="objectives"></span><h2>Tuning Objectives<a class="headerlink" href="#tuning-objectives" title="Link to this heading">¶</a></h2>
<p>Users can specify tuning objectives other than the default optimization objective, which is kernel execution time. When using
an optimization strategy other than exhaustive search (brute force), this objective is used to guide the optimization through
the parameter space. The tuning objective is specified using the <code class="docutils literal notranslate"><span class="pre">objective=</span></code> optional parameter of <code class="docutils literal notranslate"><span class="pre">tune_kernel()</span></code> and
is specified as a string. This string can be a user-defined metric or a quantity reported by an observer.</p>
<p>In addition to specifying the name of the tuning objective, it is important for many of the optimization
strategies implemented in Rocket Meals to know whether the objective should be minimized or maximized. Kernel
Tuner uses a list of defaults, but for some user-defined metrics the user may also need to specify the direction
of optimization. This is done by passing a boolean in the <code class="docutils literal notranslate"><span class="pre">objective_higher_is_better=</span></code> optional parameter of <code class="docutils literal notranslate"><span class="pre">tune_kernel()</span></code>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="contents.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="contents.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Metrics and Objectives</a><ul>
<li><a class="reference internal" href="#metrics">Metrics</a></li>
<li><a class="reference internal" href="#tuning-objectives">Tuning Objectives</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="optimization.html"
                          title="previous chapter">Optimization strategies</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="observers.html"
                          title="next chapter">Observers</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/metrics.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="observers.html" title="Observers"
             >next</a> |</li>
        <li class="right" >
          <a href="optimization.html" title="Optimization strategies"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="contents.html">Rocket Meals 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Metrics and Objectives</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2016, Baumgartner Software.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.2.
    </div>
  </body>
</html>